<h1>ğŸƒ Blackjack</h1>

<% if current_user %> <!-- Sprawdza, czy uÅ¼ytkownik jest zalogowany -->
  <p><strong>Saldo:</strong> ğŸ’° <%= current_user.wallet&.balance || 0 %> Å¼etonÃ³w</p> <!-- WyÅ›wietla saldo Å¼etonÃ³w uÅ¼ytkownika -->

  <% if @player_cards.blank? %> <!-- Sprawdza, czy gracz jeszcze nie ma kart (czyli przed rozdaniem) -->
    <%= form_with url: blackjack_deal_path, method: :post, local: true do %> <!-- Formularz do rozpoczÄ™cia rozdania -->
      <label>ZakÅ‚ad:</label><br>
      <%= number_field_tag :bet, 10, min: 1 %><br><br> <!-- Pole do wpisania kwoty zakÅ‚adu, domyÅ›lnie 10 -->
      <%= submit_tag "Rozdaj karty", class: "spin-button" %> <!-- Przycisk rozpoczÄ™cia gry -->
    <% end %>
  <% else %> <!-- JeÅ›li gracz ma juÅ¼ rozdane karty -->
    <p><strong>Twoje karty:</strong> <%= @player_cards.join(', ') %> (suma: <%= @player_cards.sum %>)</p> <!-- Pokazuje karty gracza i ich sumÄ™ -->
    <p><strong>Karty krupiera:</strong> <%= @dealer_cards.join(', ') %> (suma: <%= @dealer_cards.sum %>)</p> <!-- Pokazuje karty krupiera i ich sumÄ™ -->

    <% unless @result %> <!-- JeÅ›li gra jeszcze trwa (brak wyniku) -->
      <%= button_to "Dobierz kartÄ™", blackjack_hit_path, method: :post, class: "spin-button" %> <!-- Przycisk dobierania karty -->
      <%= button_to "Zatrzymaj siÄ™", blackjack_stand_path, method: :post, class: "spin-button" %> <!-- Przycisk zatrzymania siÄ™ -->
    <% end %>

    <% if @result %> <!-- JeÅ›li gra siÄ™ zakoÅ„czyÅ‚a -->
      <p class="result"><%= @result %></p> <!-- WyÅ›wietla wynik gry -->
      <%= button_to "Zagraj ponownie", blackjack_deal_path, method: :post, class: "spin-button" %> <!-- Przycisk do zagrania ponownie -->
    <% end %>
  <% end %>

  <% if flash[:notice] %> <!-- JeÅ›li jest komunikat flash -->
    <p class="result"><%= flash[:notice] %></p> <!-- WyÅ›wietla komunikat -->
  <% end %>
<% else %> <!-- JeÅ›li uÅ¼ytkownik nie jest zalogowany -->
  <p>Musisz byÄ‡ zalogowany, aby zagraÄ‡ w blackjacka.</p> <!-- Informuje o koniecznoÅ›ci logowania -->
<% end %>

<style>
    /* Stylizacja przyciskÃ³w */
    .spin-button {
        padding: 10px 30px;
        font-size: 1.1em;
        background-color: #2196F3;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }

    .spin-button:hover {
        background-color: #1976D2;
    }

    /* Stylizacja tekstu wyniku */
    .result {
        margin-top: 20px;
        font-size: 1.4em;
        color: gold;
    }
</style>
